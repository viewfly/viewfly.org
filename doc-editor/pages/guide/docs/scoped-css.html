<h1>模块化 CSS</h1>
<h2>安装依赖</h2>
<p>在应用开发中，模块化 css 是可以帮助我们解决样式 命名冲突的问题，要使用模块化 css，需先装对应的 webpack loader。</p><pre lang="" theme="starry" class="tb-pre tb-pre-hide-line-number"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">npm install @viewfly/devtools -D</div></div><span class="tb-pre-lang"></span></div></pre>
<p>然后在 webpack 配置项中，替换 css-loader。</p><pre lang="JavaScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">{</div><div class="tb-code-line">&nbsp;&nbsp;test: /\.css$/,</div><div class="tb-code-line">&nbsp;&nbsp;use: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-string">'style-loader'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 'css-loader',</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-string">'@viewfly/devtools/scoped-css-webpack-loader'</span></div><div class="tb-code-line">&nbsp;&nbsp;]</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">JavaScript</span></div></pre>
<p>安装 scoped-css 扩展包</p><pre lang="" theme="starry" class="tb-pre tb-pre-hide-line-number"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">npm install @viewfly/scoped-css</div></div><span class="tb-pre-lang"></span></div></pre>
<p>在组件中使用模块样式，只需要调用 withScopedCSS 函数，并传入样式表映射对象（由 css-loader 自动生成）和渲染函数，同时需要使用 css 来编写 class 名，原来有 class 也可以保留。但是为全局样式。</p><pre lang="CSS" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-selector">.box</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;width: 200px;</div><div class="tb-code-line">&nbsp;&nbsp;height: 40px;</div><div class="tb-code-line">&nbsp;&nbsp;color: red;</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">CSS</span></div></pre><pre lang="Jsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ withScopedCSS }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/scoped-css'</span></div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;css&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./app.module.css'</span></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-function">withScopedCss</span>(css, () =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">css</span>="<span class="tb-hl-attr-value">box</span>"&gt;xxx&lt;/<span class="tb-hl-tag">box</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;})</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">Jsx</span></div></pre>