<h1>路由</h1>
<div><span style="color:rgb(246, 48, 48)">Viewfly 路由目前可基本使用，更多功能还在持续完善中，可能会发生破坏性更改，你可以尝鲜使用，也可等 Viewfly 后续的稳定版本再使用。</span><br></div>
<p>通过 npm 安装路由模块。</p><pre lang="" theme="null" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">npm install @viewfly/router</div></div><span class="tb-pre-lang"></span></div></pre>
<h2>RootRouter</h2>
<p>在任意需要路由的地方使用 RootRouter 组件，一般我在会在根组件上应用。如：</p><pre lang="Jsx" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ RootRouter }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/router'</span></div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">RootRouter</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">basePath</span>="<span class="tb-hl-attr-value">/</span>"&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">header</span>&gt;xxx&lt;/<span class="tb-hl-tag">header</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">main</span>&gt;xxx&lt;/<span class="tb-hl-tag">main</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">footer</span>&gt;xxx&lt;/<span class="tb-hl-tag">footer</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-class-name">RootRouter</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;)</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">Jsx</span></div></pre>
<p>RootRouter 支持配置一个可选的根路径，当没有配置时，默认为&nbsp;<code>/</code>，当有配置时，以配置项为准。</p>
<p>需要注意的是，一个应用只能有一个 RootRouter。使用多个，会导致难以预期的 bug。</p>
<tb-alert data-type="primary" class="tb-alert tb-alert-primary">
  <div>RootRouter 目前只支持 history 模式，hash 模式正在开发中。</div>
</tb-alert>
<h2>RouterOutlet</h2>
<p>RouterOutlet 组件用于声明一个动态路由插槽，和要在当前插槽渲染的组件配置表。RouterOutlet 组件只能包含在 RootRouter 内。</p><pre lang="Jsx" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ RootRouter, RouterOutlet }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/router'</span></div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">RootRouter</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">header</span>&gt;xxx&lt;/<span class="tb-hl-tag">header</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">main</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;RouterOutlet config={[</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">''</span>,&nbsp;<span class="tb-hl-comment">// 当没有子路由时渲染 Home</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;component: Home</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'detail'</span>,&nbsp;<span class="tb-hl-comment">// 当路由为 detail 时渲染 Detail 组件</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;component: Detail</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'list'</span>,&nbsp;<span class="tb-hl-comment">// 当路由为 list 时，异步加载 List 组件，并渲染</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;component:&nbsp;<span class="tb-hl-keyword">import</span>(<span class="tb-hl-string">'./path/to/list'</span>).<span class="tb-hl-function">then</span>(module =&gt; module.Home)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'*'</span>,&nbsp;<span class="tb-hl-comment">// 当所有都不匹配时渲染 NotFound 组件，注意这里和 Children 只能二选一，以配置为优先</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;component: NotFound</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]}&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当没有匹配到任何路由时，渲染这里。但当路由配置项有&nbsp;<span class="tb-hl-string">`*`</span>&nbsp;通配符时，则以配置项为准。</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-class-name">RouterOutlet</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-tag">main</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">footer</span>&gt;xxx&lt;/<span class="tb-hl-tag">footer</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-class-name">RootRouter</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;)</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">Jsx</span></div></pre>
<h2>Link</h2>
<p>Link 用于在路由跳转功能。支持纯对路径、相对路径、查询参数及高亮匹配。Link 组件默认会生成 a 标签，但可以通过 tag 属性定制。</p>
<p>Link 组件只能在 RootRouter 组件内使用。</p><pre lang="Jsx" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">/</span>"&gt;跳转到根节点&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">/home</span>"&gt;跳转到根路由下的 home 页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">./home</span>"&gt;跳转到当前路由下的 home 页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">home</span>"&gt;跳转到当前路由下的 home 页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">../home</span>"&gt;跳转到父路由下的 home 页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">../../home</span>"&gt;跳转到父级路由的父路由下的 home 页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line"><br></div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">tag</span>="<span class="tb-hl-attr-value">button</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">./home</span>"&gt;将标签更换为 button &lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">./home</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">target</span>="<span class="tb-hl-attr-value">_blank</span>"&gt;在新标签页打开页面&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">./home</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">active</span>="<span class="tb-hl-attr-value">active</span>"&gt;当页面地址和跳转路径匹配时，给标签添加 active 的&nbsp;<span class="tb-hl-keyword">class</span>&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">/</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">active</span>="<span class="tb-hl-attr-value">active</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">exact</span>&gt;严格匹配路由高亮，用于解决匹配到子路由时引起的高亮问题&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-class-name">Link</span><span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">to</span>="<span class="tb-hl-attr-value">./home</span>"<span class="tb-hl-tag">&nbsp;</span><span class="tb-hl-attr-name">queryParams</span>={{id:&nbsp;<span class="tb-hl-string">'xxxx'</span>}}&gt;给路由添加查询参数&lt;/<span class="tb-hl-class-name">Link</span>&gt;</div></div><span class="tb-pre-lang">Jsx</span></div></pre>