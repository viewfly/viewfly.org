import { inject, useRef } from '@viewfly/core'
import { ViewUpdateInjectionToken } from '../injection-tokens'
export default function() {
  const subject = inject(ViewUpdateInjectionToken)
  const ref = useRef(node => {
    subject.next(node as HTMLElement)
  })
  return function() {
    return (
      <div ref={ref}><h1>依赖注入</h1>
<p>依赖注入是 IoC（Inversion of Control）控制反转技术的一种实现，是面向对象编程中的一种设计原则，用来降低计算机代码之间的耦合度，Viewfly 内置了依赖注入能力，实现了类似 Angular 一样的控制反转能力。</p>
<p>要完整使用 Viewfly 提供的依赖注入能力，需要 TypeScript 的支持，并且要在 tsconfig 中开启如下配置，并且确保你的编译器可以正确编辑装装饰器。</p><pre lang="JSON" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-attr-name">"compilerOptions"</span>: {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-attr-name">"emitDecoratorMetadata"</span>:&nbsp;<span class="tb-hl-boolean">true</span>,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-attr-name">"experimentalDecorators"</span>:&nbsp;<span class="tb-hl-boolean">true</span>,</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">JSON</span></div></pre>
<p>同时，你还需要安装 reflect-metadata 这个元数据兼容库，并在应用入口处导入它。</p><pre lang="" theme="starry" class="tb-pre tb-pre-hide-line-number"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">npm install reflect-metadata</div></div><span class="tb-pre-lang"></span></div></pre><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content tb-color-content-highlight"><div class="tb-code-line-emphasize tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'reflect-metadata'</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} createApp {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/platform-browser'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}...{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-function">createApp</span>(&lt;App/&gt;).<span class="tb-hl-function">mount</span>(document.<span class="tb-hl-function">getElementById</span>(<span class="tb-hl-string">'app'</span>))</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>当然，如果你不想使用装饰器，我们也可以完全通过其它方式实现类似 Vue 的 provide/inject 或 React 的 Context 的效果。</p>
<h2>基本使用</h2>
<p>Viewfly 提供了 provide 和 inject 两个函数，用于在组件渲染上下文中实现跨组件通讯能力。</p><pre lang="Jsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} inject, provide, InjectionToken {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;UserToken =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">InjectionToken</span>(<span class="tb-hl-string">'UserToken'</span>)</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Child</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;user =&nbsp;<span class="tb-hl-function">inject</span>(UserToken)</div><div class="tb-code-line">&nbsp;&nbsp;console.<span class="tb-hl-function">log</span>(user.name)&nbsp;<span class="tb-hl-comment">// 张三</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; &lt;<span class="tb-hl-tag">p</span>&gt;{'{'}user.name{'}'}&lt;/<span class="tb-hl-tag">p</span>&gt;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>({'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: UserToken,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;useValue: {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'张三'</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'})</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Child</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;)</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Jsx</span></div></pre>
<p>在上面的示例中，我们通过在上层组件通过 provide 函数提供了一个 UserToken，在下层组件使用 inject 函数获取 UserToken，即获取到上层组件提供的数据。</p>
<p>我们看到在调用 &nbsp;provide 函数时，我们传入了一个对象，对象有 provide 和 useValue 两个属性。我们可以简单把 provide 属性的值作为 key，把 useValue 属性的值作为 value。</p>
<p>要注意的是，provide 的值必须为一个 InjectionToken 的实例。这在 JavaScript 编写中并没有太大意义，但在 TypeScript 场景中，它将为我们提供准确的类型提示能力，我们将上面的示例改为 TypeScript。</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content tb-color-content-highlight"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} inject, provide, InjectionToken {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line-emphasize tb-code-line"><span class="tb-hl-keyword">interface</span>&nbsp;<span class="tb-hl-class-name">User</span>&nbsp;{'{'}</div><div class="tb-code-line-emphasize tb-code-line">&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-builtin">string</span></div><div class="tb-code-line-emphasize tb-code-line">{'}'}</div><div class="tb-code-line-emphasize tb-code-line"><br/></div><div class="tb-code-line-emphasize tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;UserToken =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">InjectionToken</span>&lt;<span class="tb-hl-class-name">User</span>&gt;(<span class="tb-hl-string">'UserToken'</span>)</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Child</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;user =&nbsp;<span class="tb-hl-function">inject</span>(UserToken)</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(user.name)&nbsp;<span class="tb-hl-comment">// 张三</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; &lt;p&gt;{'{'}user.name{'}'}&lt;/p&gt;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>({'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: UserToken,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;useValue: {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'张三'</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'})</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Child/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;)</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>现在，如果我们在子组件尝试访问 user.age 时，你将会发现，TypeScript 将会抛出错误信息。</p>
<tb-alert data-type="info" class="tb-alert tb-alert-info">
  <div>Viewfly 的依赖注入实现，基本和 Angular 类似，如果你有 Angular 的使用经验，你完全可以照搬原来的经验。当然，没有也没关系，Viewfly 的依赖注入 API 简单多了</div>
</tb-alert>
<h2>Injectable()</h2>
<p>常见的依赖注入，往往是基于 Class 的，我们可以通过 Injectable 装饰器，把一个类标记为可注入的，即可使用 Viewfly 自动管理依赖和自动实例化的能力。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Injectable, provide, inject {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-comment">// 声明类是可注入的</span></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">ChildService</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;name =&nbsp;<span class="tb-hl-string">'child'</span></div><div class="tb-code-line">&nbsp;&nbsp;index:&nbsp;<span class="tb-hl-builtin">number</span></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>() {'{'}{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-comment">// 声明类是可注入的</span></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">ParentSerivce</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;name =&nbsp;<span class="tb-hl-string">'parent'</span></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(<span class="tb-hl-keyword">public</span>&nbsp;child: ChildService) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Child</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;parentService =&nbsp;<span class="tb-hl-function">inject</span>(ParentSerivce)</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(parentService.name)&nbsp;<span class="tb-hl-comment">// parent</span></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(parentService.child.name)&nbsp;<span class="tb-hl-comment">// child</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; &lt;<span class="tb-hl-tag">p</span>&gt;{'{'}parentService.name{'}'}&lt;/<span class="tb-hl-tag">p</span>&gt;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;ParentSerivce,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;ChildService</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Child</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;)</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<p>在上面的示例中，我们发现我们并没有实例化 ParentService 和 ChildService，但我们在 Child 组件却可以正常访问 ParentService 和 ChildService 的实例。这是 Viewfly 实现的。你无需关心这个过程是怎样发生的。只需要声明式的在构造函数中，声明依赖即可。</p>
<tb-alert data-type="warning" class="tb-alert tb-alert-warning">
  <div><strong>注意：</strong>Viewfly 不会监听 provide/inject 中的数据变化。组件的自动渲染只会根据组件在渲染时所依赖的 Signal 有关。</div>
</tb-alert>
<h2>Provider 示例</h2>
<p>在上面的示例中，我们看到了我们不但可以注入类的实例，也可以通过 useValue 的方式，直接注入一个值。使用 useValue 的这种方式，我们叫做 ValueProvider。在 Viewfly 中，我们还有更多方法来提供一个可注入的对象。</p>
<h3>useValue</h3>
<p>ValueProvider 可以让我们把任意值注入到类中，常用在一些全局配置对象，或需要注入非类实例的对象或数据的场景。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Injectable, InjectionToken, Inject, ReflectiveInjector {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;PathInjectionToken =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">InjectionToken</span>&lt;<span class="tb-hl-builtin">string</span>&gt;(<span class="tb-hl-string">'PathInjectionToken'</span>)</div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Inject</span>(PathInjectionToken)&nbsp;<span class="tb-hl-keyword">public</span>&nbsp;path:&nbsp;<span class="tb-hl-builtin">string</span>) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide: PathInjectionToken,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useValue:&nbsp;<span class="tb-hl-string">'/api'</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;&lt;<span class="tb-hl-class-name">Child</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Child</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;example =&nbsp;<span class="tb-hl-function">inject</span>(Example)</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(example.path)&nbsp;<span class="tb-hl-comment">// /api</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; &lt;<span class="tb-hl-tag">p</span>&gt;{'{'}example.path{'}'}&lt;/<span class="tb-hl-tag">p</span>&gt;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<h3>classProvider</h3>
<p>classProvider 可以让我们用一个类来替换另一个类，通常是原程序的注入参数依赖于一个抽象类，再由我们提供一个实现类去实现具体的逻辑和功能。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Injectable {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">abstract</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Dialog</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">abstract</span>&nbsp;<span class="tb-hl-function">show</span>(el: Element):&nbsp;<span class="tb-hl-builtin">Promise</span>&lt;<span class="tb-hl-builtin">boolean</span>&gt;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">User</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(<span class="tb-hl-keyword">private</span>&nbsp;dialog: Dialog) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">login</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;dialogElement = document.<span class="tb-hl-function">createElement</span>(<span class="tb-hl-string">'div'</span>)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// dialog ui 及交互实现...</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">this</span>.dialog.<span class="tb-hl-function">show</span>(dialogElement).<span class="tb-hl-function">then</span>(isLogin =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(isLogin)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'})</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">Tsx</span></div></pre><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// 实现 Dialog</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Injectable, provide, inject {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">MyDialog</span>&nbsp;<span class="tb-hl-keyword">implements</span>&nbsp;<span class="tb-hl-class-name">Dialog</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">show</span>(el: Element):&nbsp;<span class="tb-hl-builtin">Promise</span>&lt;<span class="tb-hl-builtin">boolean</span>&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">let</span>&nbsp;isLogin =&nbsp;<span class="tb-hl-boolean">false</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// dialog 逻辑实现...</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-builtin">Promise</span>.<span class="tb-hl-function">resolve</span>(isLogin)</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide: Dialog,&nbsp;<span class="tb-hl-comment">// 此处用实现类替换抽象类</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useClass: MyDialog</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;&lt;<span class="tb-hl-class-name">Child</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Child</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;dialog =&nbsp;<span class="tb-hl-function">inject</span>(Dialog)</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(dialog&nbsp;<span class="tb-hl-keyword">instanceof</span>&nbsp;<span class="tb-hl-class-name">MyDialog</span>)&nbsp;<span class="tb-hl-comment">// true</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; &lt;<span class="tb-hl-tag">p</span>&gt;xxx&lt;/<span class="tb-hl-tag">p</span>&gt;</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<h3>useFactory</h3>
<p>FactoryProvider 可以让我们使用一个函数的返回值当作注入参数，注入到类中。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Http</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(<span class="tb-hl-keyword">private</span>&nbsp;config: HttpConfig) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide: HttpConfig,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseURI:&nbsp;<span class="tb-hl-string">'/api'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout:&nbsp;<span class="tb-hl-number">5000</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<p>如果 useFactory 参数的内部依赖于其它类，我们还可以通过声明 deps 依赖参数数组，让注入器在调用时，自动把相关的依赖传进来。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Http</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(<span class="tb-hl-keyword">private</span>&nbsp;config: HttpConfig) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;Api,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide: HttpConfig,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(api: Api) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseURI: api.isTest ?&nbsp;<span class="tb-hl-string">'/test/api'</span>&nbsp;:&nbsp;<span class="tb-hl-string">'/api'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout:&nbsp;<span class="tb-hl-number">5000</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps: [Api]</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<h2>如何注入其它数据</h2>
<p>在实际应用中，很多时候不仅仅只需要注入类的实例，可能还需要注入其它数据，但通过 Typescript 自动解析元数据，是无法获取到相关依赖信息的。这时，就需要通过指定 token 的方式实现。</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Injectable, InjectionToken, Inject, provide {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">interface</span>&nbsp;<span class="tb-hl-class-name">UserInfo</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-builtin">string</span>;</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;UserInfoInjectionToken =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">InjectionToken</span>&lt;<span class="tb-hl-class-name">UserInfo</span>&gt;(<span class="tb-hl-string">'UserInfoInjectionToken'</span>);</div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">User</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Inject</span>(UserInfoInjectionToken)&nbsp;<span class="tb-hl-keyword">public</span>&nbsp;userInfo: UserInfo) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provide: UserInfoInjectionToken,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useValue: {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span class="tb-hl-string">'张三'</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;])</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h2>多级注入器</h2>
<p>在简单的场景中，一个容器就可以满足我们的需求，但当应用越来越复杂时，我们就需要根据不同的作用域，来实现访问控制了。</p>
<p>比如，我们希望全局有一些基础的类，在任意类都能注入，还有另外一些类，会根据用户角色的不同，只能访问特定的类。如下图，我们把图中所有的小方块当作类，它们的访问关系是这样的。</p>
<p style="text-align:center"><img src="data:image/png;base64,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" style="max-width:100%;margin:0 0 0 0;float:none" class="tb-img" alt=""/></p>
<p>如图所示，每个类都可以访问当前容器的兄弟类或上层容器的类。在实际的代码组织中，我们只需要给一个容器指定一个父容器，就可以了。</p><pre lang="Tsx" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} provide {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@viewfly/core'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">App</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([网格, 用户])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;&lt;&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Middle1</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Middle2</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Leaf1</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-class-name">Leaf2</span>/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class="tb-hl-class-name">Middle2</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/&gt;</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Middle1</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([员工列表, 薪资明细])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Middle2</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([开发规则, 服务器])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Leaf1</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([前端开发, js仓库代码])</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}...{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">Leaf2</span>() {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">provide</span>([后台开发, go仓库代码])</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;() =&gt; {'{'}...{'}'}</div><div class="tb-code-line">{'}'}</div></div><span class="tb-pre-lang">Tsx</span></div></pre>
<p>通过如上的代码组织，我们实现了示例图中的注入树结构。那么 前端开发 这个类，可以注入哪些类呢？如前面文档所述，可以注入以下类：</p>
<p style="text-align:center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAEtCAYAAADgGN8vAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAgAElEQVR4Xu2dDXBd1XXvl2T5IisSlhEgZIMxhGA7fiAa8ijUJobSQl7j4GkUwiOOU/OaGlwoFmZI+TAMDwQ0CRiZQA08OjgRDgOJ0rHjdFpaCg6mUFoIggF/hBhjsIUAWTIysri2pTfrmC323drn++xzz8f/zDBYuvvzt/Zd56+119mngnCBgD2B6ZWVlQsnTZrUMjAwMK1YLFYDFgiAAAioBAqFwlBdXd32vr6+zuHh4Q4i2gJKIJB0AhVJHyDGVx4CtbW1Dxw4cODSJUuWVMyfP398c3Mz1dfXl2cw6BUEQCDRBPr7+6mrq4vWrl27f9WqVSNVVVWP7N279/JEDxqDyz0BCKDcL4ExACY3NDQ8NW/evKnt7e01ED1YICAAAn4IsBhqbW0dXL9+/Y7e3t7ziGiXn/ooCwJxEYAAiot0SvppaGjY1NraOmP58uUpGTGGCQIgkEQCbW1t1N7evrm3t3dmEseHMYEABBDWwCgB3vZqaWlZuHr16hpgAQEQAIGwBBYtWjTY2dnZge2wsCRR3wQBCCATVNPZ5vTq6upXu7u7C9j2SqcBMWoQSBoB3g5ramoqDg0NnYrE6KRZB+OBAMIasAhUVla2LV269PsrVqwYDyQgAAIgEBWBZcuW7V+5cuUPh4eHsa8eFVS0EwkBCKBIMKa/Ec796ezsnDF37tz0TwYzAAEQSAyBDRs2UEtLC3KBEmMRDEQQgADCWrAIFAqFfT09PdXY/sKCAAEQiJIAb4M1NjYOFYvFCVG2i7ZAICwBCKCwBLNTf2RkZCQ7s8FMQAAEEkOgosK61eB+kxiLYCBYkFgDMgEIIKwHEAABIwQggIxgRaMhCUCRhwSYoeoQQBkyJqYCAkkiAAGUJGtgLIIABBDWgiAAAYS1AAIgYIQABJARrGg0JAEIoJAAM1QdAihDxsRUQCBJBCCAkmQNjAURIKwBlQAEENYECICAEQIQQEawotGQBBABCgkwQ9UhgMpkzIqvP1SmnpPf7civFhsdJNjb442SPQSQ0WWMxgMSgAAKCC6D1SCAymRU3ITjuQnregH7eNhDAJXJuaBbRwIQQFggggAEUJnWAm7C8dyEIYD8LXBEgPzxQun0EYAASp/NTI0YAsgUWZd2IYAggMq09By7hQBKolUwpigJQABFSTPdbUEAlcl+EEAQQGVaehBASQSPMcVGAAIoNtSJ7wgCqEwmggCCACrT0oMASiJ4jCk2AhBAsaFOfEcQQGUyEQQQBFCZlh4EUBLBY0yxEYAAig114juCACqTiSCAIIDKtPQggJIIHmOKjQAEUGyoE9+RowDat28fXX311bRw4UKaPXu2r8k899xz1NHRQffccw9NmDChpG5vby8tWLCAbrrpJt/t+hpEggsnUQDduuDL1Dr/FGpf+xrdvOa/R+m9/vcXUffuQfqT5b+OhWiUibi6ASeRvTrOhed+ge5fMoee2Ph7+t69v4mFO3cSJXs8Bh+b2dCRDwIQQD5gZbyoLwEkBNGDDz6oxXLBBRfQmjVrqKGhgbZs2WKJnxdeeIEef/xxmj59ekkd/vziiy+m+++/35MIuu2226z6LJq8XHZjvfXWW602uL2bb765pCl5/F76CFMm6pswi5QvHjfJ15DeeKePZv31z606f3zqZPrpsnNp87v9JULn4au+Qn/5pzO07cr1fXXsUjjKm3AcAkiIlboJ4z1j2Nn7MX13xdP076/usq3zb21fo7NnNdEPfvFKiSD13EmAglGyhwAKYABUMU4AAsg44tR0EEgAnX322VYER75Y0Nxyyy103333WQJIXEK48M+q4NBRuuyyy8ZEjVjM7Nixg5YuXWpFo9S+de3oolcszrZt2zYqgE488cTRtjhixWMVAs60BU0IID9RGr65Nh1RMyqAWOicNaPR+pn//a05n6d71r5GV88/hT4aLJbcrDlS9LffPI06nt5qJDoR5U04TgGkRmuY41e/dNwYocPsZxxbP/p7IT6nNHzO87J7qmunkYhclOwhgDybEwVjJAABFCPshHelFUAiOtPV1VUyfI78vPzyy+RHANnN304wOfHiOldddRXde++9YyJKar08RoAa6ydQT/++UVGj3miZkRA3v9u1h6oL46yyHMG48y/OoOt/8qKFUWy9sCBiUcVCiS9Rlj9/cev7Rm7A3I/dTXhgYIAeeughuuaaaxy/VnfffTctXryY6urqtOWiFp9221V+BdA/v/yOq6C0i9RF5WcggKIiiXaSSgACKKmWiX9cjhEgdZvK6xYYT+PKK6+0IkLq1peYYhABxHU5QvPss89qc4tkfHmNALFYYdFyxxO/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" style="max-width:100%;margin:0 0 0 0;float:none" class="tb-img" alt=""/></p>
<h2>依赖注入规则声明</h2>
<p>我们除了可以在类的构造函数中，注入一个另一个类，我们还可以同时声明，让注入器按照一定的规则来注入，以适应更多的场景。</p>
<h3>Optional</h3>
<p>如果我们的注入参数是可选的，我们可以声明 Optional 来让注入器在注入器树上找不到相关依赖时，并不抛出异常，而是注入一个 null。</p>
<p>这种场景特别适合那种我们提供一个最基础的能力，如果用户有更好的，我们就用更好的。</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Optional</span>()&nbsp;<span class="tb-hl-keyword">private</span>&nbsp;http: Http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">if</span>&nbsp;(!<span class="tb-hl-keyword">this</span>.http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">this</span>.http =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">XMLHttpRequest</span>()</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>Self</h3>
<p>由于注入器是根据就近原则，依次在注入器树上查找相关类实例的，如果我们想要注入器在查找时，锁定在当前容器内查找，则可以通过 Self 装饰器来声明：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Self</span>()&nbsp;<span class="tb-hl-keyword">private</span>&nbsp;http: Http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>SkipSelf</h3>
<p>当然，如果查找时，你不想从当前容器内查找，而是想要从上一层容器开始查找，则可以通过 SkipSelf 装饰器来声明：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">SkipSelf</span>()&nbsp;<span class="tb-hl-keyword">private</span>&nbsp;http: Http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>Inject</h3>
<p>你还可以通过 Inject 装饰器指定注入 token，而不是通过参数类型。</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Inject</span>(MyHttp)&nbsp;<span class="tb-hl-keyword">private</span>&nbsp;http: Http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>当模块引用关系复杂时，我们需要注入的类，会在我们当前类后面才声明，这时会导致当前类在获取元数据时，拿不到类型，这时，我们也可以通过如下方式解决：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>()</div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">constructor</span>(@<span class="tb-hl-function">Inject</span>(<span class="tb-hl-function">forwardRef</span>(() =&gt; Http))&nbsp;<span class="tb-hl-keyword">private</span>&nbsp;http: Http) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>需要说明的是，你可以自由组合上面的装饰器。而不仅限于一个。</p>
<h2>deps 参数详解</h2>
<p>在上面的示例中，我们看到了在使用 FactoryProvider 时，可以用 deps 声明依赖参数。实际上，在 ClassProvder、ConstructorProvider 中，一样可以使用 deps 声明依赖参数，只不过，当你不声明时，注入器会根据 ClassProvder 和 ConstructorProvider 的元数据，自动帮我们做了。</p>
<p>由于 useFactory 是一个工厂函数，注入器并不能获取到其参数的依赖元数据，所以，当使用 useFactory 时，如果我们想有参数，我们是一定要声明依赖参数的。</p>
<h3>一般场景下的依赖声明</h3>
<p>普通类声明</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http, user: User) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyExample</span>(http, user)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [Http, User]&nbsp;<span class="tb-hl-comment">// 按参数顺序声明依赖</span></div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>通过 InjectionToken 查找</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// const ConfigInjectionToken = new InjectionToken&lt;Config&gt;('ConfigInjectionToken')</span></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: ConfigInjectionToken,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;useValue: {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseURI:&nbsp;<span class="tb-hl-string">'/api'</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(config: Config) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyExample</span>(config)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [HttpInjectionToken]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>定制参数的查询规则</h3>
<p>当参数可选时</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http, user: User) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 这里 http 可能为 null</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyExample</span>(http, user)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Http,&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Optional</span>()], 声明 Http 可以是可选的</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>跳过当前容器，向上查找</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http, user: User) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 这里 http 实例为 parentInjector 查找出来的，而不是当前的 injector 容器</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyExample</span>(http, user)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Http,&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">SkipSelf</span>()],&nbsp;<span class="tb-hl-comment">// 声明 Http 可以是可选的</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>锁定当前容器</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;User,</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http, user: User) {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 这里 http 实例只在当前容器内查找</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyExample</span>(http, user)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Http,&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Self</span>()],&nbsp;<span class="tb-hl-comment">// 声明 Http 只能在当前容器查找</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>在上面的参数声明中，如果有查询规则定制，我们会把单个参数的依赖和规则放在一个数组里，如这样：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http) {'{'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Http,&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Optional</span>()]&nbsp;<span class="tb-hl-comment">// 单个参数查询规则定制</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>需要说明的是，数组内的顺序是无关紧要的，同时还可以添加多个规则，如这样：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;{'{'}</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;provide: Example,</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">useFactory</span>(http: Http) {'{'}</div><div class="tb-code-line"><br/></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;{'}'},</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;deps: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Optional</span>(), Http,&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">SkipSelf</span>(), ]&nbsp;<span class="tb-hl-comment">// 多个规则，且顺序无关</span></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="tb-code-line">&nbsp;&nbsp;{'}'}</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h2>Injector.get</h2>
<p>在获取实例时，我们会通过 injector.get 方法获取，如下：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;injector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [</div><div class="tb-code-line">&nbsp;&nbsp;Http,</div><div class="tb-code-line">&nbsp;&nbsp;User</div><div class="tb-code-line">])</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;http = injector.<span class="tb-hl-function">get</span>(Http)</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>其实，我们在前面的文档中，声明的各种查询规则，最终都是调用 injector.get 方法来实现的。这就需要我们组合传入后面的两个参数。</p>
<p>当我们要获取的依赖是可选择时：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// 如果当前容器没有 Http，在获取实例时，会抛出异常，但如果我们给了第二个参数，则会把第二个参数当作没有查找到结果时的返回值，且不会抛出异常</span></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;http = injector.<span class="tb-hl-function">get</span>(Http,&nbsp;<span class="tb-hl-keyword">null</span>)</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>我们还可以通过 injector.get 方法的第三个参数，设置查询规则。</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} InjectFlags {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@tanbo/di'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-comment">// 设置跳过当前的容器查询</span></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;http = injector.<span class="tb-hl-function">get</span>(Http,&nbsp;<span class="tb-hl-keyword">null</span>, InjectFlags.SkipSelf)</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>InjectFlags 的查询规则如下：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">enum</span>&nbsp;InjectFlags {'{'}</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">/** 默认查找规则 */</span></div><div class="tb-code-line">&nbsp;&nbsp;Default =&nbsp;<span class="tb-hl-string">'Default'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">/** 锁定当前容器 */</span></div><div class="tb-code-line">&nbsp;&nbsp;Self =&nbsp;<span class="tb-hl-string">'Self'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">/** 跳过当前容器 */</span></div><div class="tb-code-line">&nbsp;&nbsp;SkipSelf =&nbsp;<span class="tb-hl-string">'SkipSelf'</span>,</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">/** 可选查找 */</span></div><div class="tb-code-line">&nbsp;&nbsp;Optional =&nbsp;<span class="tb-hl-string">'Optional'</span></div><div class="tb-code-line">{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h2>容器作用域</h2>
<p>在异步场景中，如果我们不想异步的类提前在容器内声明，可以通过 scope 的方式异步提供到指定容器。</p>
<p>创建 scope</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Scope {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@tanbo/di'</span>;</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;scope =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Scope</span>(<span class="tb-hl-string">'myScope'</span>)</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// # parent-injector.ts 同步加载的文件</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} scope {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./my-scope'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;parentInjector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(<span class="tb-hl-keyword">null</span>, [<span class="tb-hl-comment">/* 你的同步类 */</span>], scope)&nbsp;<span class="tb-hl-comment">// 声明当前容器为一个具名的的 scope</span></div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>在异步文件中，添加 scope 声明：</p><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} scope {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./my-scope'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line">@<span class="tb-hl-function">Injectable</span>({'{'}</div><div class="tb-code-line">&nbsp;&nbsp;provideIn: scope</div><div class="tb-code-line">{'}'})</div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">Example</span>&nbsp;{'{'}{'}'}</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre><pre lang="TypeScript" theme="starry" line-number class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// 异步加载的文件</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} scope {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./my-scope'</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} parentInjector {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./parent-injector'</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{'{'} Example {'}'}&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'./example'</span></div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;asyncInjector =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">ReflectiveInjector</span>(parentInjector, [])</div><div class="tb-code-line"><br/></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;example = asyncInjector.<span class="tb-hl-function">get</span>(Example)</div><div class="tb-code-line"><br/></div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p>由于 Example 类的装饰器中，我们提供了 provideIn 的作用域声明。所以在异步的容器中，我们可以不在当前容器内再次声明。在调用异步容器的 get 方法时，会自动把 Example 类添加到声明了相同作用域的父容器内。 需要注意的是，查找还是按照就近原则，如果在当前容器到声明了 scope 的容器的注入器树之间提供了声明了相同的 provide，那么，你得到实例的将不是 scope 容器内的实例，而是最近的那一个。</p></div>
    )
  }
}